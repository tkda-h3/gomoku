import { describe, it, expect } from "vitest";
import { BoardVisualizer } from "../game/board-visualizer";
import { Board } from "../game/board";

describe("BoardVisualizer", () => {
  describe("visualize", () => {
    it("空の盤面を正しく表示する", () => {
      const board = Board.create([
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
      ]);

      const visualizer = new BoardVisualizer(board);
      const actual = visualizer.visualize();

      const expected = `   A B C D E F G H I J K L M N O
 1 · · · · · · · · · · · · · · ·
 2 · · · · · · · · · · · · · · ·
 3 · · · · · · · · · · · · · · ·
 4 · · · · · · · · · · · · · · ·
 5 · · · · · · · · · · · · · · ·
 6 · · · · · · · · · · · · · · ·
 7 · · · · · · · · · · · · · · ·
 8 · · · · · · · · · · · · · · ·
 9 · · · · · · · · · · · · · · ·
10 · · · · · · · · · · · · · · ·
11 · · · · · · · · · · · · · · ·
12 · · · · · · · · · · · · · · ·
13 · · · · · · · · · · · · · · ·
14 · · · · · · · · · · · · · · ·
15 · · · · · · · · · · · · · · ·`;

      expect(actual).toBe(expected);
    });

    it("石が配置された盤面を正しく表示する", () => {
      const board = Board.create([
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          "X",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          "O",
          "X",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          "O",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
      ]);

      const visualizer = new BoardVisualizer(board);
      const actual = visualizer.visualize();

      const expected = `   A B C D E F G H I J K L M N O
 1 · · · · · · · · · · · · · · ·
 2 · · · · · · · · · · · · · · ·
 3 · · · · · · · · · · · · · · ·
 4 · · · · · · · · · · · · · · ·
 5 · · · · · · · · · · · · · · ·
 6 · · · · · · · · · · · · · · ·
 7 · · · · · · · · · · · · · · ·
 8 · · · · · · · X · · · · · · ·
 9 · · · · · · · O X · · · · · ·
10 · · · · · · · · O · · · · · ·
11 · · · · · · · · · · · · · · ·
12 · · · · · · · · · · · · · · ·
13 · · · · · · · · · · · · · · ·
14 · · · · · · · · · · · · · · ·
15 · · · · · · · · · · · · · · ·`;

      expect(actual).toBe(expected);
    });

    it("複雑な盤面を正しく表示する", () => {
      const board = Board.create([
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          "X",
          "O",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          "O",
          "X",
          "X",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          "O",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
        [
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
          ".",
        ],
      ]);

      const visualizer = new BoardVisualizer(board);
      const actual = visualizer.visualize();

      const expected = `   A B C D E F G H I J K L M N O
 1 · · · · · · · · · · · · · · ·
 2 · · · · · · · · · · · · · · ·
 3 · · · · · · · · · · · · · · ·
 4 · · · · · · · · · · · · · · ·
 5 · · · · · · · · · · · · · · ·
 6 · · · · · · X O · · · · · · ·
 7 · · · · · · O X X · · · · · ·
 8 · · · · · · · O · · · · · · ·
 9 · · · · · · · · · · · · · · ·
10 · · · · · · · · · · · · · · ·
11 · · · · · · · · · · · · · · ·
12 · · · · · · · · · · · · · · ·
13 · · · · · · · · · · · · · · ·
14 · · · · · · · · · · · · · · ·
15 · · · · · · · · · · · · · · ·`;

      expect(actual).toBe(expected);
    });
  });
});
